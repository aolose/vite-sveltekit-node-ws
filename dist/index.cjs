"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const v=require("http"),a=require("https");let n,s;const i=[],c=e=>{const t=e.createServer;i.push([t,e]),e.createServer=function(...r){return i.forEach(([o,l])=>{l.createServer=o}),n=t.call(this,...r),s&&s(n),n}},h=()=>{n||(c(v),c(a))},u=e=>{n=e.httpServer};function f(e){return{name:"svelte-kit-websocket",config(t){const r=t.server=t.server||{};(r.hmr===!0||!r.hmr)&&(r.hmr={}),r.hmr.port=e||(r.port||57777)+1},async transform(t,r){return r.endsWith("@sveltejs/kit/src/runtime/server/index.js")?{code:t.replace(/([\s\S]*import.*?from.*?('|").*?\2;\n)/,`$1import {handle} from 'vite-sveltekit-node-ws';
handle();`)}:null},configurePreviewServer:u,configureServer:u}}const d=e=>{n?e(n):s=e};exports.default=f;exports.handle=h;exports.useServer=d;
