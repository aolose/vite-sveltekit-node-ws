"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const d=require("http"),p=require("https");let n,o,i,c;const m=e=>{const t=e.on;e.on=function(...r){r[0]==="request"?(t.call(this,"request",function(s,v){S(s.url)||r[1].call(this,s,v)}),c=()=>{e.on=t}):t.call(this,...r)}},S=e=>{if(!(!e||!i))return i(new URL(e,"http://a.a").pathname)},u=[],a=e=>{const t=e.createServer;u.push([t,e]),e.createServer=function(...r){return u.forEach(([l,s])=>{s.createServer=l}),n=t.call(this,...r),m(n),f(),n}},f=()=>{n&&o&&setTimeout(()=>{c==null||c(),o(n)})},k=()=>{n||(a(d),a(p))},h=e=>{n=e.httpServer};function w(){return{name:"vite-sveltekit-node-ws",async transform(e,t){return t.endsWith("@sveltejs/kit/src/runtime/server/index.js")?{code:e.replace(/([\s\S]*import.*?from.*?(['"]).*?\2;\n)/,`$1import {handle} from 'vite-sveltekit-node-ws';
handle();`)}:null},configurePreviewServer:h,configureServer:h}}const b=(e,t)=>{i=t,o=e,f()};exports.default=w;exports.handle=k;exports.useServer=b;
